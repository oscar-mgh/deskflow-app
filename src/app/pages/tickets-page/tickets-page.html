<section class="min-h-screen bg-base-100 text-zinc-100 px-8 lg:pl-24 mt-6 fade">
	<div>
		<header class="flex justify-center md:justify-between mb-4">
			<h1 class="text-4xl font-black tracking-tight">
				Mis <span class="text-primary">Tickets</span>
			</h1>
			<button routerLink="/dashboard/ticket-create"
				class="absolute -bottom-16 md:block md:relative md:top-0 btn btn-primary font-bold rounded-2xl shadow-lg hover:opacity-90 mt-1">
				Crear nuevo ticket
			</button>
		</header>


		@if (tickets() && tickets().length > 0) {
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 items-stretch">
			@for (ticket of tickets(); track ticket.id) {
			<div
				class="bg-zinc-900 border border-white/10 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition animate-fade-in flex flex-col">


				<div class="flex-1 space-y-4">
					<h3 class="font-bold text-lg leading-tight text-zinc-100 line-clamp-2">
						{{ ticket.title }}
					</h3>

					<p class="text-sm text-zinc-400 line-clamp-3 min-h-2">
						{{ ticket.description }}
					</p>

					<div class="h-px w-full bg-white/10"></div>

					<div class="flex justify-between text-sm">
						<span class="font-medium text-zinc-400">Categor√≠a:</span>
						<span class="font-bold text-primary">{{ ticket.categoryName }}</span>
					</div>

					<div class="flex justify-between text-sm">
						<span class="font-medium text-zinc-400">Prioridad:</span>
						<span class="font-bold">{{ ticket.priority | priority }}</span>
					</div>

					<div class="flex justify-between text-sm">
						<span class="font-medium text-zinc-400">Estado:</span>
						<span class="font-bold">{{ ticket.status | status }}</span>
					</div>

					<div class="text-xs text-zinc-500 pt-2 flex flex-col gap-0.5">
						<span>Creado: {{ ticket.createdAt | date }}</span>
						@if (ticket.updatedAt) {
						<span>Actualizado: {{ ticket.updatedAt | date }}</span>
						}
					</div>
				</div>


				<button class="btn btn-sm btn-secondary font-bold w-full rounded-2xl mt-4 border-none shadow-none"
					(click)="openTicket(ticket.id); $event.stopPropagation()">
					Ver detalles
				</button>
			</div>
			}
		</div>
		}

	</div>
</section>