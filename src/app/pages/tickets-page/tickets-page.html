<section class="min-h-screen bg-base-100 text-neutral-100 px-4 md:px-8 lg:pl-24 pb-20">
	<div class="mt-6">
		<header class="flex flex-col md:flex-row justify-between items-center gap-6 mb-12">
			<h1 class="text-4xl font-bold tracking-tight">
				Mis <span class="text-primary">Tickets</span>
			</h1>

			<button routerLink="/dashboard/ticket-create"
				class="w-full md:w-auto btn btn-primary h-12 px-6 font-bold rounded-xl border-none shadow-none hover:bg-primary/70 transition-colors">
				Crear nuevo ticket
			</button>
		</header>

		@if (tickets() && tickets().length > 0) {
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 items-stretch">
			@for (ticket of tickets(); track ticket.id) {
			<div
				class="bg-neutral-900 border border-neutral-700 rounded-2xl p-6 md:p-8 flex flex-col transition-all hover:border-primary/40 shadow-none">

				<div class="flex-1 space-y-4">
					<h3 class="font-bold text-lg leading-tight text-white line-clamp-2">
						{{ ticket.title }}
					</h3>

					<p class="text-sm text-neutral-400 line-clamp-3 min-h-12">
						{{ ticket.description }}
					</p>

					<div class="h-px w-full bg-neutral-800"></div>

					<div class="space-y-2">
						<div class="flex justify-between text-sm">
							<span class="font-medium text-neutral-500">Categoría:</span>
							<span class="font-bold text-primary">{{ ticket.categoryName }}</span>
						</div>

						<div class="flex justify-between text-sm">
							<span class="font-medium text-neutral-500">Prioridad:</span>
							<span class="font-bold text-white">{{ ticket.priority | priority }}</span>
						</div>

						<div class="flex justify-between text-sm">
							<span class="font-medium text-neutral-500">Estado:</span>
							<span class="font-bold text-white">{{ ticket.status | status }}</span>
						</div>
					</div>

					<div class="text-sm text-neutral-500 pt-2 flex flex-col gap-1">
						<span class="flex items-center gap-2">
							<i class="bi bi-calendar-plus"></i> Creado: {{ ticket.createdAt | date:'shortDate' }}
						</span>
						@if (ticket.updatedAt) {
						<span class="flex items-center gap-2">
							<i class="bi bi-pencil-square"></i> Actualizado: {{ ticket.updatedAt | date:'shortDate' }}
						</span>
						}
					</div>
				</div>

				<button
					class="btn btn-primary bg-neutral-800 hover:bg-neutral-700 text-white border-none w-full h-11 font-bold rounded-xl mt-6 shadow-none transition-colors"
					(click)="openTicket(ticket.id); $event.stopPropagation()">
					Ver detalles
				</button>
			</div>
			}
		</div>
		} @else {
		<div class="flex flex-col items-center justify-center py-20 text-neutral-500">
			<i class="bi bi-ticket-perforated text-6xl mb-4 opacity-20"></i>
			<p class="text-lg font-bold">No tienes tickets registrados</p>
			<p class="text-sm">Tus solicitudes aparecerán en esta sección.</p>
		</div>
		}
	</div>
</section>